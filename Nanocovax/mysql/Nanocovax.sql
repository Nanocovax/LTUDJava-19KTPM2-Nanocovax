-- MySQL Script generated by MySQL Workbench
-- Sat Dec 25 00:52:25 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema nanocovax
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `nanocovax` ;

-- -----------------------------------------------------
-- Schema nanocovax
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `nanocovax` DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci ;
USE `nanocovax` ;

-- -----------------------------------------------------
-- Table `nanocovax`.`tinhthanhpho`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`tinhthanhpho` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`tinhthanhpho` (
  `matp` CHAR(3) NOT NULL,
  `ten` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`matp`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`quanhuyen`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`quanhuyen` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`quanhuyen` (
  `maqh` CHAR(3) NOT NULL,
  `ten` VARCHAR(45) NULL DEFAULT NULL,
  `matp` CHAR(3) NULL DEFAULT NULL,
  PRIMARY KEY (`maqh`),
  INDEX `qh_tp_idx` (`matp` ASC) VISIBLE,
  CONSTRAINT `qh_tp`
    FOREIGN KEY (`matp`)
    REFERENCES `nanocovax`.`tinhthanhpho` (`matp`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`xaphuong`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`xaphuong` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`xaphuong` (
  `maxp` CHAR(3) NOT NULL,
  `ten` VARCHAR(45) NULL DEFAULT NULL,
  `maqh` CHAR(3) NULL DEFAULT NULL,
  PRIMARY KEY (`maxp`),
  INDEX `xp_qh_idx` (`maqh` ASC) VISIBLE,
  CONSTRAINT `xp_qh`
    FOREIGN KEY (`maqh`)
    REFERENCES `nanocovax`.`quanhuyen` (`maqh`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`taikhoan`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`taikhoan` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`taikhoan` (
  `id` VARCHAR(13) NOT NULL,
  `password` CHAR(32) NULL DEFAULT NULL,
  `phanquyen` VARCHAR(9) NULL DEFAULT NULL,
  `tinhtrang` VARCHAR(4) NULL DEFAULT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`ttnguoidung`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`ttnguoidung` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`ttnguoidung` (
  `id` VARCHAR(12) NOT NULL,
  `hoten` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `ngaysinh` DATETIME NOT NULL,
  `tinhtp` CHAR(3) NULL DEFAULT NULL,
  `quanhuyen` CHAR(3) NULL DEFAULT NULL,
  `xaphuong` CHAR(3) NULL DEFAULT NULL,
  `sodu` INT NULL DEFAULT NULL,
  `sono` INT NULL DEFAULT NULL,
  `trangthai` CHAR(2) NULL DEFAULT NULL,
  `ndt` CHAR(3) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  INDEX `nd_xp_idx` (`xaphuong` ASC) VISIBLE,
  INDEX `nd_qh_idx` (`quanhuyen` ASC) VISIBLE,
  INDEX `nd_tp_idx` (`tinhtp` ASC) VISIBLE,
  CONSTRAINT `nd_xp`
    FOREIGN KEY (`xaphuong`)
    REFERENCES `nanocovax`.`xaphuong` (`maxp`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `nd_qh`
    FOREIGN KEY (`quanhuyen`)
    REFERENCES `nanocovax`.`quanhuyen` (`maqh`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `nd_tp`
    FOREIGN KEY (`tinhtp`)
    REFERENCES `nanocovax`.`tinhthanhpho` (`matp`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `nd_tk`
    FOREIGN KEY (`id`)
    REFERENCES `nanocovax`.`taikhoan` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`hoadon`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`hoadon` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`hoadon` (
  `sohd` CHAR(11) NOT NULL,
  `nguoimua` VARCHAR(12) NULL DEFAULT NULL,
  `thoigian` DATETIME NULL DEFAULT NULL,
  `tongtien` INT NULL DEFAULT NULL,
  `tratruoc` INT NULL DEFAULT NULL,
  PRIMARY KEY (`sohd`),
  INDEX `hd_nd_idx` (`nguoimua` ASC) VISIBLE,
  CONSTRAINT `hd_nd`
    FOREIGN KEY (`nguoimua`)
    REFERENCES `nanocovax`.`ttnguoidung` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`nhuyeupham`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`nhuyeupham` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`nhuyeupham` (
  `id_nyp` INT NOT NULL auto_increment,
  `tengoi` VARCHAR(45) NULL DEFAULT NULL,
  `thoihan` int NULL DEFAULT NULL,
  `dongia` INT NULL DEFAULT NULL,
  `gioihan` INT NULL DEFAULT NULL,
  `active` bool NULL DEFAULT 1,
  PRIMARY KEY (`id_nyp`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`cthd`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`cthd` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`cthd` (
  `sohd` CHAR(11) NOT NULL,
  `soluong` INT NULL DEFAULT NULL,
  `id_nyp` INT NULL DEFAULT NULL,
  PRIMARY KEY (`sohd`),
  INDEX `cthd_nyp_idx` (`id_nyp` ASC) VISIBLE,
  CONSTRAINT `cthd_hd`
    FOREIGN KEY (`sohd`)
    REFERENCES `nanocovax`.`hoadon` (`sohd`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `cthd_nyp`
    FOREIGN KEY (`id_nyp`)
    REFERENCES `nanocovax`.`nhuyeupham` (`id_nyp`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`noidieutri`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`noidieutri` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`noidieutri` (
  `id_ndt` CHAR(3) NOT NULL,
  `ten` VARCHAR(45) NULL DEFAULT NULL,
  `succhua` INT NULL DEFAULT NULL,
  `dangchua` INT NULL DEFAULT NULL,
  PRIMARY KEY (`id_ndt`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`lichsundt`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`lichsundt` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`lichsundt` (
  `id` VARCHAR(12) NOT NULL,
  `thoigian` DATETIME NOT NULL,
  `id_ndt` CHAR(3) NULL DEFAULT NULL,
  PRIMARY KEY (`id`, `thoigian`),
  INDEX `lsndt_ndt_idx` (`id_ndt` ASC) VISIBLE,
  CONSTRAINT `lsndt_nd`
    FOREIGN KEY (`id`)
    REFERENCES `nanocovax`.`ttnguoidung` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `lsndt_ndt`
    FOREIGN KEY (`id_ndt`)
    REFERENCES `nanocovax`.`noidieutri` (`id_ndt`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`lichsunql`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`lichsunql` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`lichsunql` (
  `id_nql` VARCHAR(13) NOT NULL,
  `thoigian` DATETIME NOT NULL,
  `hoatdong` VARCHAR(6) NULL DEFAULT NULL,
  `id` VARCHAR(12) NULL DEFAULT NULL,
  `id_nyp` int NULL DEFAULT NULL,
  `id_ndt` CHAR(3) NULL DEFAULT NULL,
  PRIMARY KEY (`id_nql`, `thoigian`),
  INDEX `lsnql_nd_idx` (`id` ASC) VISIBLE,
  INDEX `lsnql_nyp_idx` (`id_nyp` ASC) VISIBLE,
  INDEX `lsnql_ndt_idx` (`id_ndt` ASC) VISIBLE,
  CONSTRAINT `lsnql_tk`
    FOREIGN KEY (`id_nql`)
    REFERENCES `nanocovax`.`taikhoan` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `lsnql_nd`
    FOREIGN KEY (`id`)
    REFERENCES `nanocovax`.`ttnguoidung` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `lsnql_nyp`
    FOREIGN KEY (`id_nyp`)
    REFERENCES `nanocovax`.`nhuyeupham` (`id_nyp`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `lsnql_ndt`
    FOREIGN KEY (`id_ndt`)
    REFERENCES `nanocovax`.`noidieutri` (`id_ndt`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`lichsuthanhtoan`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`lichsuthanhtoan` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`lichsuthanhtoan` (
  `sohd` CHAR(11) NOT NULL,
  `thoigian` DATETIME NOT NULL,
  `sotien` INT NULL DEFAULT NULL,
  PRIMARY KEY (`sohd`, `thoigian`),
  CONSTRAINT `lsttoan_hd`
    FOREIGN KEY (`sohd`)
    REFERENCES `nanocovax`.`hoadon` (`sohd`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`lichsutrangthai`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`lichsutrangthai` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`lichsutrangthai` (
  `id` VARCHAR(12) NOT NULL,
  `thoigian` DATETIME NULL DEFAULT NULL,
  `trangthai` CHAR(2) NULL DEFAULT NULL,
  PRIMARY KEY (`id`),
  CONSTRAINT `lstthai_nd`
    FOREIGN KEY (`id`)
    REFERENCES `nanocovax`.`ttnguoidung` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `nanocovax`.`lienquan`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `nanocovax`.`lienquan` ;

CREATE TABLE IF NOT EXISTS `nanocovax`.`lienquan` (
  `id` VARCHAR(12) NOT NULL,
  `id_lienquan` VARCHAR(12) NOT NULL,
  PRIMARY KEY (`id`, `id_lienquan`),
  INDEX `lq_nd2_idx` (`id_lienquan` ASC) VISIBLE,
  CONSTRAINT `lq_nd1`
    FOREIGN KEY (`id`)
    REFERENCES `nanocovax`.`ttnguoidung` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `lq_nd2`
    FOREIGN KEY (`id_lienquan`)
    REFERENCES `nanocovax`.`ttnguoidung` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;


-- ----------------------------------
insert into taikhoan values('nttchau', 'nttchau', 'nql', 'ckh');

insert into tinhthanhpho values('001', 'Hà Nội');
insert into tinhthanhpho values('002', 'TP Hồ Chí Minh');

insert into quanhuyen values('001', 'Hoàng Kiếm', '001');
insert into quanhuyen values('002', 'Đống Đa', '001');
insert into quanhuyen values('003', 'Quận 1', '002');
insert into quanhuyen values('004', 'Quận 2', '002');

insert into xaphuong values('001', 'Hàng Đào', '001');
insert into xaphuong values('002', 'Hàng Mã', '001');
insert into xaphuong values('003', 'Lý Thái Tổ', '001');

insert into xaphuong values('004', 'Cát Linh', '002');
insert into xaphuong values('005', 'Quang Trung', '002');
insert into xaphuong values('006', 'Quốc Tử Giám', '002');

insert into xaphuong values('007', 'Bến Nghé', '003');
insert into xaphuong values('008', 'Hòa Bình', '003');
insert into xaphuong values('009', 'Tự Đức', '003');

insert into xaphuong values('010', 'Thảo Điền', '004');
insert into xaphuong values('011', 'Thủ Thiêm', '004');
insert into xaphuong values('012', 'Cát Lái', '004');

insert into noidieutri (id_ndt,ten,succhua,dangchua)
values ('001','Bệnh viện bệnh nhiệt đới',1000,800);
insert into noidieutri (id_ndt,ten,succhua,dangchua)
 values ('002','Bệnh viện nhi đồng TP',500,400);
insert into noidieutri (id_ndt,ten,succhua,dangchua)
values ('003','Bệnh viện điều trị Covid-19 Y Hà Nội',1500,948);
insert into noidieutri (id_ndt,ten,succhua,dangchua)
 values ('005','Bệnh viện dã chiếxaphuongxaphuongn số 2',5000,4489);
insert into noidieutri (id_ndt,ten,succhua,dangchua)
values ('006','Bệnh viện dã chiến số 4',3000,2898);
insert into noidieutri (id_ndt,ten,succhua,dangchua)
values ('007','Bệnh viện dã chiến Củ Chi',4000,2501);
insert into noidieutri (id_ndt,ten,succhua,dangchua)
values ('008','Bệnh viện Phạm Ngọc Thạch',1000,567);
